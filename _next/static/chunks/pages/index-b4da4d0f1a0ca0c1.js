(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,o,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(85)}])},85:function(e,o,t){"use strict";t.r(o);var n=t(5893),r=t(7294),i=t(2729),l=t.n(i);o.default=()=>{let[e,o]=(0,r.useState)("soft"),[t,i]=(0,r.useState)(9),[a,s]=(0,r.useState)(9),[d,c]=(0,r.useState)(10),[u,f]=(0,r.useState)(10),[_,m]=(0,r.useState)([]),[h,x]=(0,r.useState)(!0),[v,g]=(0,r.useState)(12),[b,p]=(0,r.useState)(0),j=(0,r.useRef)(void 0),N=[[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0]],k=(0,r.useCallback)(e=>{"soft"===e?(i(9),s(9),c(10)):"standerd"===e?(i(16),s(16),c(40)):"hard"===e?(i(16),s(30),c(10)):"costom"===e&&(i(9),s(9),c(10))},[]),y=(0,r.useCallback)(()=>{let e=[];for(let o=0;o<t;o++){let o=[];for(let e=0;e<a;e++)o.push({mine:!1,neighbors:0,revealed:!1,flagged:!1});e.push(o)}return e},[t,a]);(0,r.useEffect)(()=>{k(e)},[e,k]),(0,r.useEffect)(()=>{m(y()),f(d),x(!0),g(12)},[t,a,y,d]),(0,r.useEffect)(()=>{h?(clearInterval(j.current),j.current=void 0):j.current=setInterval(()=>{p(e=>e+1)},1e3)},[h]);let C=(e,o)=>{if(13===v||14===v||_[o][e].flagged)return;if(_[o][e].mine){for(let e of _)for(let o of e)o.mine&&(o.revealed=!0);g(14),clearInterval(j.current),j.current=void 0;return}let n=[..._];if(h){let r=[];for(;r.length<d;){let n=Math.floor(Math.random()*(t*a));r.includes(n)||o===Math.floor(n/a)&&e===n%a||r.push(n)}for(let e of r){let o=Math.floor(e/a),t=e%a;n[o][t].mine=!0}for(let e=0;e<t;e++)for(let o=0;o<a;o++)for(let t of N)void 0!==n[e+t[0]]&&void 0!==n[e+t[0]][o+t[1]]&&n[e+t[0]][o+t[1]].mine&&n[e][o].neighbors++;m(n),x(!1)}let r=(e,o,t)=>{if(0===t[o][e].neighbors){for(let n of N)if(void 0!==t[o+n[0]]&&void 0!==t[o+n[0]][e+n[1]]){if(t[o+n[0]][e+n[1]].revealed||t[o+n[0]][e+n[1]].mine||0!==t[o+n[0]][e+n[1]].neighbors){if(0!==t[o+n[0]][e+n[1]].neighbors)for(let n of N)void 0===t[o+n[0]]||void 0===t[o+n[0]][e+n[1]]||0===t[o+n[0]][e+n[1]].neighbors||t[o+n[0]][e+n[1]].mine||(t[o+n[0]][e+n[1]].revealed=!0)}else t[o+n[0]][e+n[1]].revealed=!0,r(e+n[1],o+n[0],t)}}};n[o][e].revealed=!0,r(e,o,n),m(n);let i=0;for(let e of n)for(let o of e)o.revealed&&i++;if(i===t*a-d){clearInterval(j.current),j.current=void 0,g(13);return}},w=(e,o,t)=>{if(14===v)return;e.preventDefault();let n=[..._];n[t][o].flagged=!n[t][o].flagged,n[t][o].flagged?f(u-1):f(u+1),m(n)},E=()=>{m(y()),f(d),x(!0),g(12),p(0)},S=e=>{o(e)};return(0,n.jsxs)("div",{className:l().container,children:[(0,n.jsx)("div",{children:(0,n.jsxs)("div",{style:{display:"flex",gap:"20px"},children:[(0,n.jsx)("div",{onClick:()=>S("soft"),style:{fontWeight:"soft"===e?"bold":"normal",cursor:"pointer"},children:"初級"}),(0,n.jsx)("div",{onClick:()=>S("standerd"),style:{fontWeight:"standerd"===e?"bold":"normal",cursor:"pointer"},children:"中級"}),(0,n.jsx)("div",{onClick:()=>S("hard"),style:{fontWeight:"hard"===e?"bold":"normal",cursor:"pointer"},children:"上級"}),(0,n.jsx)("div",{onClick:()=>S("costom"),style:{fontWeight:"costom"===e?"bold":"normal",cursor:"pointer"},children:"カスタム"}),"costom"===e?(0,n.jsxs)("form",{children:[(0,n.jsx)("label",{htmlFor:"row",children:"row"}),(0,n.jsx)("input",{type:"number",name:"row",id:"row",onChange:e=>{i(Number(e.target.value))}}),(0,n.jsx)("label",{htmlFor:"col",children:"col"}),(0,n.jsx)("input",{type:"number",name:"col",id:"col",onChange:e=>{s(Number(e.target.value))}}),(0,n.jsx)("label",{htmlFor:"bom",children:"bom"}),(0,n.jsx)("input",{type:"number",name:"bom",id:"bom",onChange:e=>{c(Number(e.target.value))}}),(0,n.jsx)("input",{type:"submit",value:"更新"})]}):(0,n.jsx)(n.Fragment,{})]})}),(0,n.jsxs)("div",{className:l().gamecontainer,children:[(0,n.jsxs)("div",{className:l().topbar,children:[(0,n.jsx)("div",{className:l().display,children:u}),(0,n.jsx)("div",{className:l().emoji,style:{backgroundPositionX:30-30*v},onClick:()=>E()}),(0,n.jsx)("div",{className:l().display,children:b})]}),(0,n.jsx)("div",{className:l().board,children:_.map((e,o)=>(0,n.jsx)("div",{className:l().row,children:e.map((e,t)=>e.revealed?e.mine?(0,n.jsx)("div",{className:l().cell,style:{backgroundPositionX:-200}},"".concat(t,"-").concat(o)):(0,n.jsx)("div",{className:l().cell,style:{backgroundPositionX:20-20*e.neighbors}},"".concat(t,"-").concat(o)):e.flagged?(0,n.jsx)("button",{className:l().cover,style:{backgroundPositionX:-180},onClick:()=>C(t,o),onContextMenu:e=>w(e,t,o)},"".concat(t,"-").concat(o)):(0,n.jsx)("button",{className:l().cover,style:{backgroundPositionX:24},onClick:()=>C(t,o),onContextMenu:e=>w(e,t,o)},"".concat(t,"-").concat(o)))},o))})]})]})}},2729:function(e){e.exports={container:"index_container___q52_",main:"index_main__OmNu0",footer:"index_footer__v7pGE",title:"index_title__k0g7D",description:"index_description__fcKbo",code:"index_code__r6g09",grid:"index_grid__LrZtk",card:"index_card__7H7ka",logo:"index_logo__Z0ACT",topbar:"index_topbar__nGEhO",display:"index_display__fIk67",emoji:"index_emoji__HOWx3",gamecontainer:"index_gamecontainer__8Whu4",row:"index_row__UqwCN",cell:"index_cell__E8qMc",board:"index_board__dNO5V",cover:"index_cover__Hrjg1"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);